{% extends 'base.html' %}
{% block content %}
<h1>Thống kê hoạt động</h1>
<ul>
  <li><strong>Bài viết:</strong> {{ total_posts }}</li>
  <li><strong>Người dùng:</strong> {{ total_users }}</li>
  <li><strong>Bình luận:</strong> {{ total_comments }}</li>
  <li><strong>Lượt xem:</strong> {{ total_views }}</li>
</ul>

<canvas id="chart" width="400" height="150"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('chart').getContext('2d');
  const chart = new Chart(ctx, {
      type: 'line',
      data: {
          labels: [{% for item in posts_by_day %}'{{ item.day|date:"d/m" }}',{% endfor %}],
          datasets: [{
              label: 'Bài viết theo ngày',
              data: [{% for item in posts_by_day %}{{ item.count }},{% endfor %}],
              backgroundColor: 'rgba(54, 162, 235, 0.5)',
              borderColor: 'rgba(54, 162, 235, 1)',
              borderWidth: 1,
              fill: true
          }]
      }
  });
</script>
{% endblock %}